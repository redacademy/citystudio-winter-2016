jQuery(document).ready(function(e){function t(){return Object.keys(n).map(function(e){return""!==n[e]?"filter["+e+"]="+n[e]:!1}).filter(Boolean).join("&")}function l(){console.log(n),e.ajax({type:"GET",dataType:"json",url:api_vars.rest_url+"wp/v2/project?"+t(),success:function(t){if(console.log(t),t.length<4)for(var l=4-t.length,n=0;l>n;n++)t.push({placeholder:!0});var a=e(".home-slider"),r="";a.flickity("destroy"),a.empty(),e.each(t,function(e,t){function l(){return"1"===t.featured_project[0]?"featured-square":"featured-rectangle"}t.placeholder?(r+='<a class="gallery-anchor"><li class="blue-placeholder">',r+="</li></a>"):(r+='<a class="gallery-anchor js-flickity" href="'+t.link+'" data-flickity-options="initialIndex:3">',r+='<li class=" '+l(),NaN+t.featured_image_url+') no-repeat;">',r+=' " style="background: url('+t.featured_image_url+') no-repeat;">',r+='<div class="description">',r+='<h2 class="description-title">'+t.title.rendered+"</h2>",r+='<div class="subtitle"> '+t.subtitle+" </div>",r+="<br>",r+='<span class="home-description"> '+t.excerpt+" </span>",r+="</div>",r+="</li>",r+="</a>")}),a.append(r).flickity({cellAlign:"left",contain:"true",wrapAround:"true"})}})}var n={neighbourhoods:"",partners:"",year:""},a="",r="",i="";e("#sort").resize(function(){e("#page").width()<=480&&e("#sort.nav-div").addClass("open")}),e("#sort_nav").click(function(){e("#sort").toggleClass("open")}),e("#refresh").click(function(){e("#sort").toggleClass("open")}),e("#refresh").click(function(){a="",r="",i="",e(".neigh-labels").removeClass("current-menu"),e(".neigh-labels").hide(),e(".neigh-labels").empty(),e(".part-labels").removeClass("current-menu"),e(".part-labels").hide(),e(".part-labels").empty(),e(".year-labels").removeClass("current-menu"),e(".year-labels").hide(),e(".year-labels").empty(),e(".foot-sub-menu").removeClass("current-menu")}),e(".foot-sub-menu label").hide(),e(".menu-item").hover(function(){e(this).children(".foot-sub-menu").toggleClass("current-menu"),""!==a&&""!==r&&""!==i||e(".current-menu").toggle()}),e(".foot-sub-menu label").hide(),e(".neigh-labels").hide(),e(".part-labels").hide(),e(".year-labels").hide(),e(".menu-item").hover(function(){e(this).children(".foot-sub-menu").addClass("current-menu")},function(){e(this).removeClass("current-menu")}),e(".sub-menu-neigh").click(function(){e(this.checked)&&(n.neighbourhoods=e(this).find("input").val(),a=e(this).text().trim(),e(".neigh-labels").show().append("<label>"+a+"</label>"),e(this).parent().hide(),l())}),e(".sub-menu-part").click(function(){e(this.checked)&&(n.partners=e(this).find("input").val(),r=e(this).text().trim(),e(".part-labels").show().append("<label>"+r+"</label>"),e(this).parent().hide(),l())}),e(".sub-menu-year").click(function(){e(this.checked)&&(n.year=e(this).find("input").val(),i=e(this).text().trim(),e(".year-labels").show().append("<label>"+i+"</label>"),e(this).parent().hide(),l())})});