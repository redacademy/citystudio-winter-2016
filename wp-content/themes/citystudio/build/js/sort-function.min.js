jQuery(document).ready(function(e){function t(){return Object.keys(r).map(function(e){return""!==r[e]?"filter["+e+"]="+r[e]:!1}).filter(Boolean).join("&")}function i(){console.log(r),e.ajax({type:"GET",dataType:"json",url:api_vars.rest_url+"wp/v2/project?"+t(),success:function(t){if(console.log(t),t.length<4)for(var i=4-t.length,r=0;i>r;r++)t.push({placeholder:!0});var n=e(".home-slider"),l="";n.flickity("destroy"),n.empty(),e.each(t,function(e,t){function i(){return"1"===t.featured_project[0]?"featured-rectangle":"featured-square"}t.placeholder?(l+='<a class="gallery-anchor"><li class="featured-square blue-placeholder">',l+="</li></a>"):(l+='<a class="gallery-anchor js-flickity" href="'+t.link+'" data-flickity-options="initialIndex:3">',l+='<li class=" '+i(),NaN+t.featured_image_url+') no-repeat cover;">',l+=' " style="background: url('+t.featured_image_url+') no-repeat;">',l+='<div class="description">',l+='<h2 class="description-title">'+t.title.rendered+"</h2>",l+='<div class="subtitle"> '+t.subtitle+" </div>",l+="<br>",l+='<span class="home-description"> '+t.excerpt+" </span>",l+="</div>",l+="</li>",l+="</a>")}),n.append(l).flickity({cellAlign:"left",contain:"true",wrapAround:"true"})}})}var r={neighbourhoods:"",partners:"",year:""};checkedNeigh="",checkedPart="",checkedYear="",e("#sort").resize(function(){e("#sort.nav-div").addClass("open")}),e("#sort_nav").click(function(){e("#sort").toggleClass("open")}),e("#refresh").click(function(){e("#sort").toggleClass("open")}),e("#refresh").click(function(){checkedNeigh="",checkedPart="",checkedYear="",e(".neigh-labels").empty().hide(),e(".part-labels").empty().hide(),e(".year-labels").empty().hide(),e(".home-slider").flickity("destroy"),e(".home-slider").empty(),e(".home-slider").flickity({cellAlign:"left",contain:!0,initialIndex:0,accessibility:!0,wrapAround:!0,autoPlay:!0})}),e(".menu-item").mouseover(function(){var t=e(this).children("div").find("label").length;t||e(this).children(".foot-sub-menu").addClass("current-menu")}),e(".menu-item").mouseout(function(){e(this).children(".foot-sub-menu").removeClass("current-menu")}),e(".sub-menu-neigh").click(function(){e(this.checked)&&(r.neighbourhoods=e(this).find("input").val(),checkedNeigh=e(this).text().trim(),e(".neigh-labels").show().append("<label>"+checkedNeigh+"</label>"),e(this).parent().removeClass("current-menu"),i())}),e(".sub-menu-part").click(function(){e(this.checked)&&(r.partners=e(this).find("input").val(),checkedPart=e(this).text().trim(),e(".part-labels").show().append("<label>"+checkedPart+"</label>"),e(this).parent().removeClass("current-menu"),i())}),e(".sub-menu-year").click(function(){e(this.checked)&&(r.year=e(this).find("input").val(),checkedYear=e(this).text().trim(),e(".year-labels").show().append("<label>"+checkedYear+"</label>"),e(this).parent().removeClass("current-menu"),i())})});
